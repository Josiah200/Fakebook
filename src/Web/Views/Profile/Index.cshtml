@model Fakebook.Web.Models.ViewModels.ProfileViewModel

<div class="col-md-5">
	<div class="sticky-top" style="padding-top:4rem">
		<div class="card card card-outline-primary p-1 container">
			<div class ="row">
				@if(Model.IsProfileOwner)
				{
					<a href="#" class="badge" data-toggle="modal" data-target="#editModal" style="position:absolute; right:0; bottom:0; margin:auto; z-index: 100;">
						<img src="~/images/edit.svg"></img>
						<div style="color: black">Edit Profile</div>
					</a>
				}
				<div class="col-md-4 px-auto">
					<img class="img-fluid mx-auto" src="https://beachmeter.com/wp-content/uploads/2017/06/250x250px.png" width="200" height="200"></img>
				</div>
				<div class="container col-md-8 pl-0 pr-15 m-0" style="display: flex; flex-direction: row; flex-wrap: wrap; flex-flow: column wrap; align-content: flex-start;">
					<div style="order: 0;"> 
						<div style="font-size: 2em">@Model.ProfileUser.FirstName @Model.ProfileUser.LastName</div>
					</div>
					<div class="row mx-auto">
						@if (Model.ProfileUser.Birthdate != null)
						{
							<div class="badge pr-2 pt-2 pb-2 m-1 profilebadge" title="Birthday" style="order: 1"><img src="~/images/birthday.svg" height="20px"></img>@Model.ProfileUser.Birthdate?.ToShortDateString()</div>
						}
						@if (!String.IsNullOrEmpty(Model.ProfileUser.City))
						{
							<div class="badge pr-2 pt-2 pb-2 m-1 profilebadge" title="Current home" style="order: 2"><img src="~/images/location.svg" height="20px"></img>
							</div>
						}
						@* TODO: display locations *@
						@if (!String.IsNullOrEmpty(Model.ProfileUser.Gender))
						{
							<div class="badge pr-2 pt-2 pb-2 m-1 profilebadge" title="Gender" style="order: 3">@Model.ProfileUser.Gender</div>
						}
						@if (!(String.IsNullOrEmpty(Model.ProfileUser.Company)) && !(String.IsNullOrEmpty(Model.ProfileUser.Company)))
						{
							<div class="badge pr-2 pt-2 pb-2 m-1 profilebadge" title="Job" style="order: 4"><img src="~/images/workplace.svg" height="20px"></img>@Model.ProfileUser.JobTitle at @Model.ProfileUser.Company</div>
						}
						else if (!String.IsNullOrEmpty(Model.ProfileUser.Company))
						{
							<div class="badge pr-2 pt-2 pb-2 m-1 profilebadge" title="Workplace" style="order: 4"><img src="~/images/workplace.svg" height="20px"></img>@Model.ProfileUser.Company</div>
						}
						else if (!String.IsNullOrEmpty(Model.ProfileUser.Company))
						{
							<div class="badge pr-2 pt-2 pb-2 m-1 profilebadge" title="Job title" style="order: 4"><img src="~/images/workplace.svg" height="20px"></img>@Model.ProfileUser.JobTitle</div>
						}
						@if (!String.IsNullOrEmpty(Model.ProfileUser.HighSchool))
						{
							<div class="badge pr-2 pt-2 pb-2 m-1 profilebadge" title="High school" style="order: 5"><img src="~/images/highschool.svg" height="20px"></img>@Model.ProfileUser.HighSchool</div>
						}
						@if (!String.IsNullOrEmpty(Model.ProfileUser.College))
						{
							<div class="badge pr-2 pt-2 pb-2 m-1 profilebadge" title="College" style="order: 6"><img src="~/images/college.svg" height="20px"></img>@Model.ProfileUser.College</div>
						}
					</div>
				</div>
			</div>
		</div>
		@if (!Model.IsProfileOwner)
		{
			<div>
				@if (Model.Friendship == null) {
					<a asp-controller="Friends" asp-Action="AddFriend" asp-route-userPublicId="@Model.ProfileUser.PublicId" class="btn container-fluid" style="background-color:#7b2cab; border-color:#7b2cab; color:white;">Add Friend</a>
				}

				else if (Model.Friendship.Status == Fakebook.Core.Entities.Status.Pending) {
					<a asp-controller="Friends" asp-Action="RemoveFriend" asp-route-userPublicId="@Model.ProfileUser.PublicId" class="btn container-fluid" style="background-color:#7b2cab; border-color:#7b2cab; color:white;">Cancel Friend Request</a>
				}

				else if (Model.Friendship.Status == Fakebook.Core.Entities.Status.Accepted) {
					<a asp-controller="Friends" asp-Action="RemoveFriend" asp-route-userPublicId="@Model.ProfileUser.PublicId" class="btn container-fluid" style="background-color:#7b2cab; border-color:#7b2cab; color:white;">Remove Friend</a>
				}
			</div>
		}
	</div>
</div>
<div id="posts" class="col-md-7" style="padding-top:4rem" />
@if(Model.IsProfileOwner)
{
	<div class="modal fade" id="editModal" role="form" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="editModalLabel">Edit Profile<h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<form asp-controller="Profile" asp-action="UpdateProfile" method="post">
						<div class="form-group">
							<label asp-for="UpdateInput.FirstName">First name</label>
							<input asp-for="UpdateInput.FirstName" type="text" value="@Model.ProfileUser.FirstName" class="form-control"></input>
							<span asp-validation-for="UpdateInput.FirstName" class="text-danger"></span>
						</div>
						<div class="form-group">
							<label asp-for="UpdateInput.LastName">Last name</label>
							<input asp-for="UpdateInput.LastName" type="text" value="@Model.ProfileUser.LastName" class="form-control"></input>
							<span asp-validation-for="UpdateInput.LastName" class="text-danger"></span>
						</div>
						<label asp-for="UpdateInput.Gender">Gender</label>
						<div class="form-group" style="display: flex; flex-direction: row; justify-content: flex-start; flex-wrap: wrap;">
							<div class="btn-group btn-group-toggle" data-toggle="buttons" style="order: 0;">
								<label class="btn">
									<input type="radio" value="Male" id="maleradio" class="form-control genderradio"> Male
								</label>
								<label class="btn">
									<input type="radio" value="Female" id="femaleradio" class="form-control genderradio"> Female
								</label>
								<label class="btn" id="gendercustombtn">
									<input type="radio" value="Custom" id="gendercustom" class="form-control"> Custom
								</label>
							</div>
							<input asp-for="UpdateInput.Gender" type="text" value="@Model.ProfileUser.Gender" maxlength="10" value="@Model.ProfileUser.Gender" class="form-control genderinput" style="width: 8rem; display: none; order: 1;"></input>
							<span asp-validation-for="UpdateInput.Gender" class="text-danger"></span>
						</div>
						<div class="form-group">
							<label asp-for="UpdateInput.Birthdate">Birthdate</label>
							<input asp-for="UpdateInput.Birthdate" type="date" value="@Model.ProfileUser.Birthdate" class="form-control"></input>
							<span asp-validation-for="UpdateInput.Birthdate" class="text-danger"></span>
						</div>

						<div class="form-group">
							<label asp-for="UpdateInput.PublicId" title="This is the part of the Url that identifies your profile">Public ID <img height="18px" src="~/images/question.svg" class="pb-1"></label>
							<input asp-for="UpdateInput.PublicId" type="text" value="@Model.ProfileUser.PublicId" class="form-control"></input>
							<span asp-validation-for="UpdateInput.PublicId" class="text-danger"></span>
						</div>
						<button type="submit">Submit Form</button>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					<button type="button" class="btn btn-primary">Save changes</button>
				</div>
			</div>
		</div>
	</div>
}
@section Scripts
{
	<script type="text/javascript" data-user_id="@Model.ProfileUser.Id" data-url="User" src ="~/js/postscroll.js"></script>
	@if(Model.IsProfileOwner)
	{
		<script src="~/js/gendercustom.js" language="javascript"></script>
		@if(Model.ProfileUser.Gender == "Male")
		{
			<script language="javascript">
				$("#maleradio").last().prop('checked', true);
			</script>
		}
		else if(Model.ProfileUser.Gender == "Female")
		{
			<script language="javascript">
				$("#femaleradio").last().prop('checked', true);
			</script>
		}
		else
		{
			<script language="javascript">
				$("#gendercustom").last().prop('checked', true);
				$("#UpdateInput_Gender").val('');
				$("#UpdateInput_Gender").toggle();
			</script>
		}
	}
}